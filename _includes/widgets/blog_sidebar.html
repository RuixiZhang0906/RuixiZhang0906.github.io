<!-- Categories -->
<div class="bg-white shadow-sm rounded-lg p-4 mb-4">
    <h5 class="mb-3">
        <i class="fas fa-folder"></i> Categories
    </h5>
    {% assign categories = site.blogs | group_by: "category" | sort: "name" %}
    <div class="list-group list-group-flush">
        {% for category in categories %}
        <a href="/blogs/category?category={{ category.name }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
            {{ category.name | capitalize }}
            <span class="badge badge-primary badge-pill">{{ category.items.size }}</span>
        </a>
        {% endfor %}
    </div>
</div>

<!-- Tags -->
<div class="bg-white shadow-sm rounded-lg p-4 mb-4">
    <h5 class="mb-3">
        <i class="fas fa-tags"></i> Popular Tags
    </h5>
    {% assign tags = site.blogs | map: "tags" | uniq | sort %}
    <div class="d-flex flex-wrap">
        {% for tag in tags limit: 10 %}
        <a href="/blogs/tag?tag={{ tag }}" class="badge badge-light mr-2 mb-2 text-decoration-none">
            {{ tag }}
        </a>
        {% endfor %}
    </div>
</div>

<!-- Recent Posts -->
<div class="bg-white shadow-sm rounded-lg p-4 mb-4">
    <h5 class="mb-3">
        <i class="fas fa-clock"></i> Recent Posts
    </h5>
    {% assign recent_posts = site.blogs | sort: "date" | reverse | limit: 5 %}
    <div class="list-group list-group-flush">
        {% for post in recent_posts %}
        <a href="{{ post.url }}" class="list-group-item list-group-item-action">
            <div class="d-flex w-100 justify-content-between">
                <h6 class="mb-1">{{ post.title }}</h6>
                <small class="text-muted">{{ post.date | date: "%b %d" }}</small>
            </div>
            <p class="mb-1 small text-muted">{{ post.excerpt | strip_html | truncate: 80 }}</p>
        </a>
        {% endfor %}
    </div>
</div>

<!-- Archive -->
<div class="bg-white shadow-sm rounded-lg p-4">
    <h5 class="mb-3">
        <i class="fas fa-archive"></i> Archive
    </h5>
    {% assign sorted_posts = site.blogs | sort: "date" | reverse %}
    {% assign current_year = "" %}
    {% assign year_count = 0 %}
    <div class="list-group list-group-flush">
        {% for post in sorted_posts %}
            {% assign post_year = post.date | date: "%Y" %}
            {% if post_year != current_year and year_count < 5 %}
                {% assign current_year = post_year %}
                {% assign year_count = year_count | plus: 1 %}
                {% assign year_posts_count = 0 %}
                {% for p in sorted_posts %}
                    {% assign p_year = p.date | date: "%Y" %}
                    {% if p_year == post_year %}
                        {% assign year_posts_count = year_posts_count | plus: 1 %}
                    {% endif %}
                {% endfor %}
                <a href="/blogs/archive" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                    {{ post_year }}
                    <span class="badge badge-secondary badge-pill">{{ year_posts_count }}</span>
                </a>
            {% endif %}
        {% endfor %}
    </div>
</div>
