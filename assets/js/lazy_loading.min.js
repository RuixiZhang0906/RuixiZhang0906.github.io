class LazyLoader{constructor(e={}){this.options={rootMargin:"200px 0px",threshold:.1,loadingClass:"lazy-loading",loadedClass:"lazy-loaded",errorClass:"lazy-error",...e},this.images=[],this.iframes=[],this.observer=null,this.init()}init(){"IntersectionObserver"in window?(this.observer=new IntersectionObserver(this.onIntersection.bind(this),{rootMargin:this.options.rootMargin,threshold:this.options.threshold}),this.findElements(),this.observeElements()):this.loadAllElements(),this.setupMutationObserver()}findElements(){this.images=Array.from(document.querySelectorAll("img[data-src], img[data-srcset], source[data-srcset]")),this.iframes=Array.from(document.querySelectorAll("iframe[data-src]"))}observeElements(){this.images.forEach(e=>{this.observer&&!e.classList.contains(this.options.loadedClass)&&(this.observer.observe(e),e.classList.add(this.options.loadingClass))}),this.iframes.forEach(e=>{this.observer&&!e.classList.contains(this.options.loadedClass)&&(this.observer.observe(e),e.classList.add(this.options.loadingClass))})}onIntersection(e){e.forEach(e=>{e.isIntersecting&&(this.loadElement(e.target),this.observer.unobserve(e.target))})}loadElement(e){e.classList.remove(this.options.loadingClass),"iframe"===e.tagName.toLowerCase()?this.loadIframe(e):this.loadImage(e)}loadImage(e){const s=e.getAttribute("data-src"),t=e.getAttribute("data-srcset"),i=e.getAttribute("data-sizes");e.addEventListener("load",()=>{e.classList.add(this.options.loadedClass)}),e.addEventListener("error",()=>{e.classList.add(this.options.errorClass)}),i&&(e.sizes=i),t&&(e.srcset=t),s&&(e.src=s),e.removeAttribute("data-src"),e.removeAttribute("data-srcset"),e.removeAttribute("data-sizes")}loadIframe(e){const s=e.getAttribute("data-src");e.addEventListener("load",()=>{e.classList.add(this.options.loadedClass)}),e.addEventListener("error",()=>{e.classList.add(this.options.errorClass)}),s&&(e.src=s),e.removeAttribute("data-src")}loadAllElements(){this.images.forEach(e=>this.loadImage(e)),this.iframes.forEach(e=>this.loadIframe(e))}setupMutationObserver(){new MutationObserver(e=>{let s=!1;if(e.forEach(e=>{if("childList"===e.type&&e.addedNodes.length>0)for(const t of e.addedNodes)if(t.nodeType===Node.ELEMENT_NODE&&((t.hasAttribute&&(t.hasAttribute("data-src")||t.hasAttribute("data-srcset")))||(t.querySelector&&t.querySelector("[data-src], [data-srcset]")))){s=!0;break}}),s){this.findElements(),this.observeElements()}}).observe(document.body,{childList:!0,subtree:!0})}refresh(){this.findElements(),this.observeElements()}}let lazyLoader;"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initLazyLoader):initLazyLoader();function initLazyLoader(){lazyLoader=new LazyLoader,window.lazyLoader=lazyLoader}